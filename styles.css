:root {
  --primary-color: #0077cc;
  --primary-hover-color: #005fa3;
  --header-bg-color: #006ab3;
  --secondary-color: #6c757d;
  --background-color: #f8f9fa;
  --surface-color: #ffffff;
  --text-color: #212529;
  --text-muted-color: #6c757d;
  --border-color: #dee2e6;
  --error-color: #dc3545;
  --success-color: #28a745;
  --font-family-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-family: 'Vazirmatn', var(--font-family-system);
  --border-radius: 0.5rem;
  --box-shadow: 0 3px 6px rgba(0, 0, 0, 0.07), 0 7px 15px rgba(0, 0, 0, 0.05);
}

html { scroll-behavior: smooth; }

body {
  font-family: var(--font-family);
  margin: 0;
  background-color: var(--background-color);
  color: var(--text-color);
  line-height: 1.7;
  display: flex;
  justify-content: center;
  padding: 0;
  text-align: right;
}

.app-shell {
  width: 100%;
  max-width: 700px;
  background-color: var(--surface-color);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  overflow: hidden;
  position: relative;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

@media (max-width: 600px) {
  .app-shell { border-radius: 0; box-shadow: none; }
}

.main-content { flex-grow: 1; }

header {
  background-color: var(--header-bg-color);
  color: white;
  padding: 0.8rem 1.2rem;
  text-align: center;
  position: sticky; top: 0; z-index: 800;
  box-shadow: 0 2px 4px rgba(0,0,0,0.08);
}

header .header-content {
  display: flex; align-items: center; justify-content: center;
  position: relative; min-height: 48px;
}

header .company-title {
  margin: 0; font-size: 1.6rem; font-weight: 800; text-align: right;
  line-height: 1.2; letter-spacing: 1.5px; color: #fff;
}
header .company-title span.logo-brackets { color: #a7d8ff; font-weight: 700; }

/* NEW: auth area */
.auth-area {
  position: absolute; left: 1.2rem; top: 50%;
  transform: translateY(-50%);
  display: flex; gap: .5rem; align-items: center;
}
.auth-badge {
  background: #ffffff22; color: #e6f2ff;
  font-size: .9rem; padding: .35rem .6rem;
  border: 1px solid rgba(255,255,255,.25);
  border-radius: 999px;
  display: inline-flex; gap: .5rem; align-items: center;
}
.auth-link {
  background: transparent; border: 1px solid #ffffffaa;
  color: #fff; padding: .35rem .6rem; border-radius: .5rem;
  cursor: pointer; font-size: .9rem;
}
.auth-link:hover { background: rgba(255,255,255,.12); }

.hamburger-button {
  background: none; border: none; color: white; cursor: pointer; padding: 0;
  display: flex; align-items: center; justify-content: center;
  width: 26px; height: 20px; position: absolute; right: 1.2rem; top: 50%;
  transform: translateY(-50%); z-index: 1001;
}
.hamburger-button span {
  display: block; position: absolute; height: 2.5px; width: 100%; background: white;
  border-radius: 3px; opacity: 1; right: 0; transform: rotate(0deg); transition: .25s ease-in-out;
}
.hamburger-button span:nth-child(1){ top:0; }
.hamburger-button span:nth-child(2), .hamburger-button span:nth-child(3){ top:8px; }
.hamburger-button span:nth-child(4){ top:16px; }
.hamburger-button.active span:nth-child(1){ top:8px; width:0%; right:50%; }
.hamburger-button.active span:nth-child(2){ transform:rotate(45deg); }
.hamburger-button.active span:nth-child(3){ transform:rotate(-45deg); }
.hamburger-button.active span:nth-child(4){ top:8px; width:0%; right:50%; }

main { padding: 1.5rem; }
section {
  margin-bottom: 2rem; padding: 1.5rem; background-color: var(--surface-color);
  border-radius: var(--border-radius); box-shadow: var(--box-shadow); border: 1px solid #f0f0f0;
}
section:last-child { margin-bottom: 0; }
section h2 {
  margin-top:0; margin-bottom:1.5rem; font-size:1.35rem; font-weight:700; color: var(--primary-color);
  border-bottom:2px solid var(--primary-color); padding-bottom:.75rem;
}

.input-method-tabs { display:flex; margin-bottom:1.5rem; border-radius: var(--border-radius); overflow:hidden; background:#eef1f4; padding:.3rem; }
.tab-button { flex-grow:1; padding:.85rem 1rem; background:transparent; border:none; cursor:pointer; font-size:.95rem; font-weight:500; color:var(--text-muted-color); transition: .3s; border-radius: calc(var(--border-radius) - .3rem); }
.tab-button.active { background: var(--surface-color); color: var(--primary-color); font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,.1); }
.tab-button:not(.active):hover{ color: var(--primary-color); }
.tab-content { display:none; padding:1rem 0 0 0; }
.tab-content.active { display:block; }

.record-timer { font-size:2.5rem; font-weight:300; color:var(--primary-color); text-align:center; margin-bottom:1rem; letter-spacing:2px; transition: color .3s; }
#record-content.is-recording #recordTimerDisplay { color: var(--error-color); }
#record-content.is-recording #recordTimerDisplay::before { content:'‚óè'; color: var(--error-color); font-size:1rem; margin-left:.75rem; animation: pulseRecord 1.5s infinite; display:inline-block; }
@keyframes pulseRecord { 0%{opacity:1; transform:scale(1);} 50%{opacity:.5; transform:scale(.8);} 100%{opacity:1; transform:scale(1);} }

#startRecordBtn.hidden, #stopRecordBtn.hidden { display:none !important; }

.file-label {
  display:block; padding:.85rem 1.25rem; background: var(--primary-color); color:#fff; border-radius: var(--border-radius);
  cursor:pointer; text-align:center; transition:.2s; margin-bottom:.5rem; font-weight:500; box-shadow: 0 1px 3px rgba(0,0,0,.1);
}
.file-label:hover { background: var(--primary-hover-color); box-shadow: 0 3px 6px rgba(0,0,0,.15); transform: translateY(-1px); }
.file-label input[type="file"]{ display:none; }
.file-name-display { font-size:.85rem; color:var(--text-muted-color); margin-top:.75rem; text-align:center; min-height:1.2em; }

.record-button {
  display:flex; align-items:center; justify-content:center; gap:.75rem;
  width:100%; padding:.85rem; font-size:1rem; font-weight:500; border-radius: var(--border-radius);
  border:1px solid var(--primary-color); background: var(--primary-color); color:#fff; cursor:pointer;
  transition:.2s; margin-bottom:.75rem; box-shadow: 0 1px 3px rgba(0,0,0,.1);
}
.record-button:hover:not(:disabled){ box-shadow: 0 3px 6px rgba(0,0,0,.15); transform: translateY(-1px); }
#startRecordBtn { background: var(--success-color); border-color: var(--success-color); }
#startRecordBtn:hover:not(:disabled){ background:#1e7e34; border-color:#1e7e34; }
#stopRecordBtn { background: var(--error-color); border-color: var(--error-color); }
#stopRecordBtn:hover:not(:disabled){ background:#c82333; border-color:#c82333; }
.record-button:disabled{ background: var(--secondary-color); border-color: var(--secondary-color); cursor:not-allowed; opacity:.6; transform: translateY(0); box-shadow: 0 1px 3px rgba(0,0,0,.1); }

.recording-status { text-align:center; font-size:.9rem; color: var(--text-muted-color); min-height:1.2em; margin-top:.75rem; }

.form-group { margin-bottom:1.25rem; }
.form-group label { display:block; font-weight:500; margin-bottom:.5rem; font-size:.95rem; }
.form-group select, .form-group textarea, .form-group input[type="number"]{
  width:100%; padding:.75rem; border:1px solid var(--border-color); border-radius: var(--border-radius);
  font-size:.95rem; box-sizing:border-box; background:#fdfdfd; color: var(--text-color); transition: .2s;
}
.form-group :is(select,textarea,input[type="number"]):focus{ outline:none; border-color: var(--primary-color); box-shadow: 0 0 0 .2rem rgba(0,123,255,.2); }
.form-group textarea { min-height:80px; }

.primary-button {
  display:block; width:100%; padding:.9rem 1.5rem; background: var(--primary-color); color:#fff; border:none; border-radius: var(--border-radius);
  font-size:1.1rem; font-weight:500; letter-spacing:.5px; cursor:pointer; transition:.2s; text-align:center; box-shadow: 0 2px 5px rgba(0,0,0,.1);
}
.primary-button:hover:not(:disabled){ background: var(--primary-hover-color); box-shadow: 0 4px 8px rgba(0,0,0,.15); transform: translateY(-1px); }
.primary-button:disabled{ background: var(--secondary-color); cursor:not-allowed; opacity:.6; transform: translateY(0); box-shadow: 0 2px 5px rgba(0,0,0,.1); }

.loading-indicator { display:flex; align-items:center; justify-content:center; gap:.75rem; margin-top:1.5rem; font-size:1rem; color: var(--primary-color); }
.spinner { width:24px; height:24px; border:3px solid rgba(0,123,255,.25); border-top-color: var(--primary-color); border-radius:50%; animation: spin .8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

.transcription-output-section h2 { color: var(--success-color); border-bottom-color: var(--success-color); }
.transcription-controls { display:flex; justify-content:flex-start; gap:.75rem; margin-bottom:1rem; }
.icon-button {
  background:transparent; border:1px solid var(--border-color); border-radius: var(--border-radius);
  padding:.5rem .8rem; cursor:pointer; display:flex; align-items:center; gap:.5rem; font-size:.9rem; font-weight:500; color: var(--text-muted-color); transition:.2s;
}
.icon-button svg{ fill:currentColor; width:20px; height:20px; }
.icon-button:hover{ background:#f8f9fa; color: var(--primary-color); border-color: var(--primary-color); transform: translateY(-1px); }

.transcription-text-area {
  width:100%; min-height:180px; padding:1rem; border:1px solid #ced4da; border-radius: var(--border-radius);
  background:#fdfdfd; font-size:1rem; line-height:1.6; white-space:pre-wrap; overflow-y:auto; box-sizing:border-box; word-break: break-word;
}

.error-message {
  color: var(--error-color); background:#f8d7da; border:1px solid #f5c6cb;
  padding:1rem; border-radius: var(--border-radius); margin-top:1.5rem; text-align:center; font-size:.95rem;
}

footer {
  text-align:center; padding:1.5rem; font-size:.85rem; color: var(--text-muted-color);
  background: var(--surface-color); border-top:1px solid var(--border-color); margin-top:auto;
}

/* Side Navigation */
.side-nav {
  height:100%; width:0; position:fixed; z-index:1000; top:0; right:0; background:#1e2227; overflow-x:hidden;
  transition: width .35s cubic-bezier(.4,0,.2,1); padding-top:70px; box-shadow: -4px 0 12px rgba(0,0,0,.25);
}
.side-nav.open { width:260px; }
.side-nav ul{ list-style:none; padding:0; margin:0; }
.side-nav ul li a{
  padding:14px 25px 14px 20px; text-decoration:none; font-size:1.15rem; font-weight:500; color:#bec5cb; display:block; transition:.2s; border-right:3px solid transparent;
}
.side-nav ul li a:hover, .side-nav ul li a.active-nav-item { color:#fff; background:#343a40; border-right-color: var(--primary-color); }

.close-nav-button { position:absolute; top:18px; left:25px; font-size:2.2rem; background:none; border:none; color:#bec5cb; cursor:pointer; padding:.25rem; line-height:1; }
.close-nav-button:hover{ color:#fff; }

/* Overlay */
.overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,.55); z-index:900; opacity:0; transition: opacity .35s cubic-bezier(.4,0,.2,1); }
.overlay.active { display:block; opacity:1; }

/* Modal */
.modal { display:none; position:fixed; z-index:1001; left:0; top:0; width:100%; height:100%; overflow:auto; background: rgba(0,0,0,.6); }
.modal.active { display:flex; align-items:center; justify-content:center; }
.modal-content {
  background: var(--surface-color); margin:auto; padding:0; border-radius: var(--border-radius); box-shadow: 0 5px 15px rgba(0,0,0,.2);
  width:90%; max-width:600px; max-height:90vh; display:flex; flex-direction:column; overflow:hidden;
}
.modal-header {
  padding:1.25rem 1.75rem; background: var(--primary-color); color:#fff; display:flex; justify-content:space-between; align-items:center;
  border-bottom:1px solid var(--primary-hover-color);
}
.modal-header h2{ margin:0; font-size:1.35rem; font-weight:700; color:#fff; border-bottom:none; }
.close-modal-btn{ background:none; border:none; color:#fff; font-size:1.9rem; font-weight:bold; cursor:pointer; padding:0 .5rem; line-height:1; opacity:.8; transition: opacity .2s; }
.close-modal-btn:hover{ opacity:1; }
.modal-body { padding:1.75rem; overflow-y:auto; }
.modal-body hr { border:0; border-top:1px solid var(--border-color); margin:1.5rem 0; }
.modal-body h3{ margin-top:0; margin-bottom:.75rem; color: var(--primary-color); font-weight:600; }
.modal-body p{ margin-bottom:.75rem; line-height:1.6; }
.modal-body p strong{ font-weight:600; }
.modal-body em{ color: var(--text-muted-color); font-size:.9em; }

#historyList { list-style:none; padding:0; margin:0; }
#historyList li {
  padding:1rem 1.25rem; border:1px solid var(--border-color); border-radius: var(--border-radius); margin-bottom:.75rem; cursor:pointer; transition:.2s;
}
#historyList li:last-child{ margin-bottom:0; }
#historyList li:hover{ background:#f8f9fa; box-shadow: 0 2px 5px rgba(0,0,0,.08); transform: translateX(-3px); }
#historyList li .history-item-name{ font-weight:500; font-size:1.05rem; display:block; margin-bottom:.3rem; color: var(--primary-color); }
#historyList li .history-item-date{ font-size:.8rem; color: var(--text-muted-color); display:block; }
#historyList li .history-item-preview{ font-size:.9rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; display:block; margin-top:.35rem; color:#495057; }

#historyDetailView h3{ margin-top:0; margin-bottom:1rem; color: var(--primary-color); font-size:1.2rem; font-weight:700; }
#historyDetailView p{ font-size:.95rem; margin-bottom:.75rem; }
#historyDetailView .transcription-text-area{ background:#f9f9f9; margin-bottom:1.5rem; min-height:120px; }

.secondary-button {
  padding:.7rem 1.2rem; background: var(--secondary-color); color:#fff; border:none; border-radius: var(--border-radius);
  font-size:.95rem; font-weight:500; cursor:pointer; transition:.2s; margin-top:1rem;
}
.secondary-button:hover{ background:#545b62; transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,.1); }

#currentCreditBalance{ color: var(--primary-color); font-size:1.3rem; font-weight:bold; }
.credit-options { display:flex; flex-wrap:wrap; gap:1rem; margin:1.5rem 0; }
.credit-package-btn {
  flex-basis: calc(33.333% - .66rem); min-width:120px; padding:.85rem; background: var(--success-color); color:#fff; border:none; border-radius: var(--border-radius);
  cursor:pointer; font-size:.95rem; font-weight:500; text-align:center; transition:.2s;
}
.credit-package-btn:hover{ background:#218838; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,.1); }
#creditsModal .form-group{ margin-top:1.5rem; }
#creditsModal .primary-button{ margin-top:1rem; }

.message { margin-top:1.5rem; padding:1rem; border-radius: var(--border-radius); text-align:center; font-size:.95rem; font-weight:500; }
.message.success { background:#d1e7dd; color:#0f5132; border:1px solid #badbcc; }
.message.error { background:#f8d7da; color:#842029; border:1px solid #f5c2c7; }

@media (max-width: 768px) { .credit-package-btn{ flex-basis: calc(50% - .5rem); } }
@media (max-width: 600px) {
  main{ padding:1rem; }
  section{ padding:1rem; }
  header{ padding:.75rem 1rem; }
  header .company-title{ font-size:1.3rem; letter-spacing:1px; }
  .primary-button{ font-size:1rem; padding:.8rem 1.2rem; }
  .side-nav.open{ width:240px; }
  .modal-content{ width:95%; margin:2.5vh auto; max-height:95vh; }
  .credit-package-btn{ flex-basis:100%; }
  .transcription-controls{ gap:.5rem; }
  .icon-button{ padding:.4rem .6rem; font-size:.85rem; }
  .icon-button svg{ width:18px; height:18px; }
  .record-timer{ font-size:2rem; }
}
